{% load static %}
{% load i18n %}
{% get_current_language as LANGUAGE_CODE %}

<!DOCTYPE html>
<html lang="en" dir="{% if LANGUAGE_CODE == 'ar' %}rtl{% else %}ltr{% endif %}">

  <head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

    <script src="{% static 'js/alpine.min.js' %}" defer></script>
    <script src="{% static 'js/htmx.min.js' %}" defer></script>
    <script type="module" src="{% static 'js/main.js' %}" defer></script>

    <style>
      [x-cloak] {
        display: none;
      }
    </style>

    {% block styles %}{% endblock %}

    <title>{% block title %}{% endblock %}</title>

  </head>

  <body hx-headers='{ "X-CSRFToken": "{{ csrf_token }}" }'>

    <div 
      id="app"
      x-data="{
        asideOpen: false, 
        modalOpen: true,
        breadCrumbs: [
            {
              text: '{% translate 'home' %}', 
              href: '{% url 'base:index' %}'
            },
        ],
      }" 
      class="realtive"
    >

      <span id="no-content"></span>
      <c-messages></c-messages>
      <div id="modal"></div>

      <c-header>
        <c-aside></c-aside>
      </c-header>

      <main 
      class="p-4 pt-8 mb-12 mx-auto w-[min(100%,1000px)]">
        {% block body %}{% endblock %}
      </main>
      
      <footer></footer>

    </div>

    {% if debug %}
    <script>
      if (typeof window.htmx !== "undefined") {
          htmx.on("htmx:afterSettle", function(detail) {
              if (
                  typeof window.djdt !== "undefined"
                  && detail.target instanceof HTMLBodyElement
              ) {
                  djdt.show_toolbar();
              }
          });
      }
    </script>
    {% endif %}

    {% block scripts %}{% endblock %}

  </body>

</html>